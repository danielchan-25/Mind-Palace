# 磁盘管理命令

## df

`df`：用于显示目前在 Linux 系统上的文件系统磁盘使用情况统计。

```sh
# 语法
df [-ahikHTm] [目录或文件名]
```

选项：

- `-h`：「--human-readable」 使用人类可读的格式（GBytes, MBytes, KBytes）
- `-m`：以 MBytes 的容量显示各文件系统
- `-k`：以 KBytes 的容量显示各文件系统
- `-T` ：显示文件系统类型

```sh
root@cc-desktop:~# df -h
Filesystem      Size  Used Avail Use% Mounted on
udev            1.9G     0  1.9G   0% /dev
tmpfs           382M  1.9M  380M   1% /run
/dev/sda5        58G   27G   29G  49% /
tmpfs           1.9G     0  1.9G   0% /dev/shm
tmpfs           5.0M  4.0K  5.0M   1% /run/lock
tmpfs           1.9G     0  1.9G   0% /sys/fs/cgroup
/dev/sda1       511M  4.0K  511M   1% /boot/efi
tmpfs           382M  4.0K  382M   1% /run/user/120
tmpfs           382M     0  382M   0% /run/user/1000
```

第一列：指定文件系统的名称。

## du

`du`：检查磁盘空间使用量。

```sh
# 语法
du [-ahskm] 文件或目录名称
```

选项：

- `-h`：以人们较易读的容量格式 (G/M) 显示
- `-s`：列出总量而已，而不列出每个各别的目录占用容量

```sh
root@cc-desktop:/data/docker# du -sh /data/docker/
82M	/data/docker/

root@cc-desktop:/data/docker# du -sh *
88K	/data/docker/aria2
12K	/data/docker/docker-compose
39M	/data/docker/home-assistant
668K	/data/docker/jd_maotai
2.7M	/data/docker/jd_qianggou
56K	/data/docker/memos
164K	/data/docker/portainer
15M	/data/docker/py12306-master
2.7M	/data/docker/py12306-master.zip
16K	/data/docker/ql_jd
16K	/data/docker/ql_others
23M	/data/docker/uptime-kuma
```

## fdisk

`fdisk`：磁盘分区表操作工具。

```sh
# 语法
fdisk [-l] 装置名称
```

选项：

- `-l`：列出所有分区信息

## msfs

`msfs`：磁盘格式化。

```sh
# 语法
mkfs [-t 文件系统格式] 装置文件名
```

选项

- `device` ： 预备检查的硬盘分区，例如：`/dev/sda1`
- `-V` : 详细显示模式
- `-t` : 给定档案系统的型式，Linux 的预设值为 `ext2`
- `-c` : 在制做档案系统前，检查该partition 是否有坏轨
- `-l bad_blocks_file` : 将有坏轨的block资料加到 `bad_blocks_file` 里面
- `block` : 给定 `block` 的大小

```shell
mkfs -t ext4 /dev/sdb1
```

## fsck

`fsck`：用来检查和维护不一致的文件系统。

若系统掉电或磁盘发生问题，可利用fsck命令对文件系统进行检查。

```sh
# 语法
fsck [-t 文件系统] [-ACay] 装置名称
```

## mount

`mount`：磁盘挂载。

```sh
# 语法
mount [-t 文件系统] [-L Label名] [-o 额外选项] [-n]  装置文件名  挂载点
```

```sh
mount -t nfs 10.211.55.15:/data/share /data/share
```

## umount

`umount`：磁盘卸载。

```sh
# 语法
umount [-fn] 装置文件名或挂载点
```

选项：

- `-f`：强制卸除！可用在类似网络文件系统 （NFS） 无法读取到的情况下
- `-n`：不升级 /etc/mtab 情况下卸除。





参考文档

> https://www.bilibili.com/read/cv16810915/w