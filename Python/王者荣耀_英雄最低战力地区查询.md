# 王者荣耀_英雄最低战力地区查询

> 日期：2023/6/28
>
> 作者：cc

## 前言

本人也是一位王者荣耀玩家，7年的游戏历程，没有拿过一个国服（最多只有市标）

想打一个国服，所以我想知道哪些英雄的国标战力相对于其它英雄是偏低的，可以冲一下国标。

## 效果图

![](https://github.com/danielchan-25/Mind-Palace/blob/main/Python/img/wzry_zhanli-1.png)

## 英雄最低战力信息爬取

> 单次爬取英雄最低战力信息

```python
import requests
import json
import csv
import os
# --------------------------------------- #
# 日期: 2023/6/29
# 作者: cc
# 功能：获取王者荣耀最低战力
# --------------------------------------- #

def get_Data():
    csv_title = ['英雄名称','平台','最低的县标所在位置','最低的县标所需战力','最低的市标所在位置','最低的市标所需战力','最低的省标所在位置','最低的省标所需战力','最低的国标所需战力','更新时间']
    hero_list = ['李白','娜可露露','杨戬','花木兰','达摩','鲁班七号']

    csv_file = open('王者荣耀\\王者荣耀最低战力排行.csv','w',newline='')
    for title in csv_title:
        csv_file.write(str(title)+',')
    csv_file.write('\n')
    csv_file.close()

    for hero_name in hero_list:
        api_url = f'http://api.txapi.cn/v1/c/game_query/wz?token=0M1Y2WCmYMxt2&type=iwx&hero={hero_name}'
        response = requests.get(url=api_url)
        data = json.loads(response.text)['data']

        with open('王者荣耀\\王者荣耀最低战力排行.csv','a',newline='') as file:
            writer = csv.writer(file)
            writer.writerow(data.values())
        print(f'{hero_name} 的数据已写入')

if __name__ == '__main__':
    if not os.path.exists('王者荣耀\\'):
        os.mkdir('王者荣耀\\')
    get_Data()
```



---



> 每日定时爬取英雄最低战力信息

```python
import os.path
from apscheduler.schedulers.blocking import BlockingScheduler
import requests
import json
import csv
import datetime
# --------------------------------------- #
# 日期: 2023/6/29
# 作者: cc
# 功能：每日获取指定英雄的最低战力信息
# --------------------------------------- #

today = datetime.datetime.today().date()

# 英雄列表
hero_list = ['李白','娜可露露','杨戬','花木兰','达摩','鲁班七号']


def create_csv_file():
    csv_title = ['英雄名称', '平台', '最低的县标所在位置', '最低的县标所需战力', '最低的市标所在位置',
                 '最低的市标所需战力', '最低的省标所在位置', '最低的省标所需战力', '最低的国标所需战力', '更新时间']

    for hero_name in hero_list:
        csv_file = open(f'王者荣耀\\{hero_name}.csv','w',newline='')
        for title in csv_title:
            csv_file.write(str(title)+',')
        csv_file.write('\n')
        csv_file.close()

def get_Data():
    for hero_name in hero_list:
        api_url = f'http://api.txapi.cn/v1/c/game_query/wz?token=0M1Y2WCmYMxt2&type=iwx&hero={hero_name}'
        response = requests.get(url=api_url)
        data = json.loads(response.text)['data']

        with open(f'王者荣耀\\{hero_name}.csv','a',newline='') as file:
            writer = csv.writer(file)
            writer.writerow(data.values())
        print(f'{hero_name} 的数据已写入')
    print(f'已将 {today} 的数据写入，等待明天的 09:10 继续执行\n# ----------------------------------------- #')

# -------------------------------------------------------------------- #
print('''
# ----------------------------------------- #
程序将在 09:10 自动执行
详细数据见：王者荣耀 文件夹

:)
# ----------------------------------------- #
''')
if not os.path.exists('王者荣耀\\'):
    os.mkdir('王者荣耀\\')
    create_csv_file()
# -------------------------------------------------------------------- #
# 定时任务
sched = BlockingScheduler()
sched.add_job(get_Data,'cron',hour=9,minute=10,timezone='Asia/Shanghai')
sched.start()
```

